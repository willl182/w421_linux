# Problem Record (Troubleshooting)

**Severity**: Medium

## The Problem

Durante el hardening de SSH, la configuracion seguia mostrando `passwordauthentication yes` pese a overrides nuevos, y fail2ban mostro un error transitorio de socket tras restart.

## User-Requested Corrections

- Ejecutar ajuste fino de fail2ban y luego guardar/documentar todo.
- Confirmar cierre de sesion con el skill `saver`.

## The Solution / Workaround

1. Detectar conflicto en SSH con `grep` sobre `sshd_config.d` y deshabilitar `50-cloud-init.conf`.
2. Persistir `ssh_pwauth: false` en cloud-init.
3. Validar fail2ban con `fail2ban-client -t`, reiniciar servicio y confirmar con `is-active/ping/status sshd`.
4. Actualizar `CURRENT_SESSION.md`, runbooks y registros historicos.

## Learnings to Preserve

- Siempre validar estado efectivo con `sshd -T` y `fail2ban-client status sshd`.
- En este entorno, cloud-init puede introducir overrides que invalidan hardening esperado.
