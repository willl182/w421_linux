# Technical Finding / Milestone

**Context**: Integracion Gmail realtime en OpenClaw (VPS headless)

## The Discovery

Para habilitar notificaciones push de Gmail en tiempo real en este entorno, la combinacion estable fue:

1. `gog` autenticado por flujo remoto (`--remote --step=1/2`) con OAuth Desktop app.
2. `gcloud` instalado y autenticado dentro del contenedor OpenClaw para setup Pub/Sub.
3. Endpoint publico minimo via Tailscale Funnel en path dedicado (`/gmail-pubsub`) y no sobre toda la app.
4. `openclaw webhooks gmail setup --tailscale off --push-endpoint <url>` + runner `openclaw webhooks gmail run` activo.

## The Solution

1. Corregir SSH operativo por tailnet (`vps-openclaw -> srv1408623`).
2. Cargar `credentials.json` OAuth en contenedor y configurar keyring `file`.
3. Exportar `GOG_KEYRING_PASSWORD` fijo para operar sin TTY.
4. Instalar `google-cloud-cli` en contenedor y autenticar `gcloud` al proyecto.
5. Configurar Funnel en host para `/gmail-pubsub` y ejecutar setup con `--push-endpoint`.
6. Levantar runner en background y validar logs.

## Result

- Cuenta Gmail dedicada autenticada: `rafiki182.claw@gmail.com`.
- Pub/Sub configurado en `hypnotic-camp-488413-c6`.
- Endpoint push publico operativo: `https://srv1408623.tail7009c7.ts.net/gmail-pubsub`.
- Listener activo: `watch: listening on 0.0.0.0:8788/gmail-pubsub`.
